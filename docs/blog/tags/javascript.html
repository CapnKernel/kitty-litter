<!DOCTYPE HTML>
<!--
	Future Imperfect by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
<head>
	<title>Kitty Litter - </title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="/css/main.css" />
</head>
<body class="is-preload">

	<!-- Wrapper -->
	<div id="wrapper">

		<!-- Header -->
		<header id="header">
			<h1><a href="/index.html"> <img src="/images/logo.png"> Kitty Litter</a></h1>
			<nav class="links">
				<ul>
  <li><a href="/blog/index.html">Blog</a></li>
</ul>

			</nav>
			<nav class="main">
				<ul>
					<!-- <li class="search">
						<a class="fa-search" href="#search">Search</a>
						<form id="search" method="get" action="#">
							<input type="text" name="query" placeholder="Search" />
						</form>
					</li> -->
					<li class="menu">
						<a class="fa-bars" href="#menu">Menu</a>
					</li>
				</ul>
			</nav>
		</header>

		<!-- Menu -->
		<section id="menu">
			<!-- Search -->
			<!-- <section>
				<form class="search" method="get" action="#">
					<input type="text" name="query" placeholder="Search" />
				</form>
			</section> -->

			<!-- Links -->
			<section>
				<ul class="links">
			
					<li>
						<a href="/blog/index.html">
							<h3>Blog</h3>
							<p></p>
						</a>
					</li>
			
				</ul>
			</section>

			<!-- Actions -->
			<!-- <section>
				<ul class="actions stacked">
					<li><a href="#" class="button large fit">Log In</a></li>
				</ul>
			</section> -->
		</section>

		<!-- Main -->
		<div id="main">
			
<!-- Post -->

  <article class="post">
    <header>
      <div class="title">
        <h2><a href="/blog/modern-vanilla-js-cookie-parsing.html">Modern Vanilla JS for cookie parsing</a></h2>
      </div>
      <div class="meta">
        <time class="published" datetime="2018-10-05">Fri, 05 Oct 2018</time>
      </div>
    </header>
    <a href="single.html" class="image featured"><img src="images/pic01.jpg" alt="" /></a>
    <p><p>In a <a href="/blog/2015/aug/28/vanilla-js-meets-djangos-csrf/">previous post</a> I wrote a Vanilla JS function for parsing all the current cookies. Since then a couple of things have happened:</p>

<ol>
<li>I realised it was not safe</li>
<li>JS in browsers got better [and I got better at it]</li>
</ol>

<p>It was not safe in as much as it parsed the cookie value once and retained the value. If you were, for instance,  using a SPA, Django might update the CSRF token at any point, making your value stale.  So instead, I've updated the function to get just one value, and perform parsing on each call.</p>

<pre><code>function getCookie (name) {
  let value;

  (document.cookie || '')
    .split(';')
    .map(c =&gt; c.trim().match(/(\w+)=(.*)/))
    .forEach(([m, k, v]) =&gt; {
      if (m !== undefined &amp;&amp; decodeURIComponent(k) === name) {
        value = decodeURIComponent(v);
      }
    });
  return value;
}
</code></pre>

<p>So the process is much the same. We declare a va</p>
    <footer>
      <ul class="actions">
        <li><a href="/blog/modern-vanilla-js-cookie-parsing.html" class="button large">Continue Reading</a></li>
      </ul>
    </footer>
  </article>
  
  <article class="post">
    <header>
      <div class="title">
        <h2><a href="/blog/serialiser-hurry.html">Serialiser in a hurry</a></h2>
      </div>
      <div class="meta">
        <time class="published" datetime="2015-08-14">Fri, 14 Aug 2015</time>
      </div>
    </header>
    <a href="single.html" class="image featured"><img src="images/pic01.jpg" alt="" /></a>
    <p><p>Serialisers are increasingly important now that most web apps are just APIs for the JavaScript to consume.</p>

<p>Serialisers help to reduce your living code objects into simpler types that can be encoded in your serialisation format [typically JSON].  After all, JSON has no date or time types, no classes, etc.</p>

<p>In the Django world, modern REST API libraries separate their Serialiser from the views, and go to great lengths to make them easy to configure, simple to use, and fast.  They also support returning your "deflated" data into live code objects.</p>

<p>However, sometimes you don't need all that.  You know what you need, and it's simple.</p>

<h2>The goal</h2>

<p>A simple and fast way to turn our object's attributes into a dict of values.</p>

<h2>The tools</h2>

<p>So I've cobbled together a cheeky solution using two great tools from Python's standard library:  operator.attrgetter and collections.namedtuple</p>

<h2>The steps</h2>

<p>First, attrgetter is a factory t</p>
    <footer>
      <ul class="actions">
        <li><a href="/blog/serialiser-hurry.html" class="button large">Continue Reading</a></li>
      </ul>
    </footer>
  </article>
  
  <article class="post">
    <header>
      <div class="title">
        <h2><a href="/blog/vanilla-js-meets-djangos-csrf.html">Vanilla JS meets Django's CSRF</a></h2>
      </div>
      <div class="meta">
        <time class="published" datetime="2015-08-28">Fri, 28 Aug 2015</time>
      </div>
    </header>
    <a href="single.html" class="image featured"><img src="images/pic01.jpg" alt="" /></a>
    <p><p>I was recently helping someone who was trying to learn about building web sites, and was trying to avoid learning too many things at once, so opted to avoid JS libraries for now.</p>

<p>As the discussion progressed, they ran into Django's <a href="https://docs.djangoproject.com/en/1.8/ref/csrf/">Cross Site Request Forgery protection</a> which stumped them.</p>

<p>So, as I was about to link them to the part of the docs that shows how to add the CSRF token from the cookie to your headers, I realised it all assumes you're using jQuery.</p>

<p>Now, that wasn't a bad assumption at the time, but it wasn't viable for this discussion.  So I decided to put my hand to writing a vanilla JS solution.</p>

<p>First step: get the CSRF token cookie.</p>

<pre><code>//
// Find the CSRF Token cookie value
//

function parse_cookies() {
    var cookies = {};
    if (document.cookie &amp;&amp; document.cookie !== '') {
        document.cookie.split(';').forEach(function (c) {
            var m = c.</code></pre></p>
    <footer>
      <ul class="actions">
        <li><a href="/blog/vanilla-js-meets-djangos-csrf.html" class="button large">Continue Reading</a></li>
      </ul>
    </footer>
  </article>
  
  <article class="post">
    <header>
      <div class="title">
        <h2><a href="/blog/wrapping-views-decorators.html">Wrapping views with decorators</a></h2>
      </div>
      <div class="meta">
        <time class="published" datetime="2014-10-29">Wed, 29 Oct 2014</time>
      </div>
    </header>
    <a href="single.html" class="image featured"><img src="images/pic01.jpg" alt="" /></a>
    <p><p>Django provides many decorators for use throughout your project.  They can be great time savers, and mastering them can help you DRY your code considerable.  However, they often confuse people as to how they work, or how to write their own.</p>

<p>In this post I plan to walk through an example of building up a simple decorator that tests if the user has a specific permission, and if not returning a 403 Forbidden response.</p>

<h1>Decorator basics.</h1>

<p>The decorator syntax does <em>not</em> add anything you can't already do in other ways.</p>

<pre><code>def myview(...):
    ...

myview = mydecorator(myview)
</code></pre>

<p>is equivalent to:</p>

<pre><code>@mydecorator
def myview(...):
    ...
</code></pre>

<p>That's right - a decorator just calls your decorator function, passing your function [or class] as its only argument, and assigning the result to the same name.</p>

<h1>Common Code</h1>

<p>So, in this scenario you would find yourself starting a lot of views like th</p>
    <footer>
      <ul class="actions">
        <li><a href="/blog/wrapping-views-decorators.html" class="button large">Continue Reading</a></li>
      </ul>
    </footer>
  </article>
  


		</div>

		<!-- Sidebar -->
		<section id="sidebar">
			<!-- Intro -->
			<section id="intro">
				<a href="/" class="logo"><img src="images/logo.jpg" alt="" /></a>
				<header>
					<h2>Tags</h2>
					<!-- <p>Tags</p> -->
				</header>
			</section>
			
<!-- Links -->
<section>
  <header>
    <h2>Tags</h2>
  </header>
  <ul class="posts">

    <li>
      <article>
        <header>
          <a href="/blog/tags/django.html">
            <h3>django</h3>
            <p>12 posts.</p>
          </a>
        </header>
      </article>
    </li>

    <li>
      <article>
        <header>
          <a href="/blog/tags/python.html">
            <h3>python</h3>
            <p>9 posts.</p>
          </a>
        </header>
      </article>
    </li>

    <li>
      <article>
        <header>
          <a href="/blog/tags/code.html">
            <h3>code</h3>
            <p>4 posts.</p>
          </a>
        </header>
      </article>
    </li>

    <li>
      <article>
        <header>
          <a href="/blog/tags/javascript.html">
            <h3>javascript</h3>
            <p>4 posts.</p>
          </a>
        </header>
      </article>
    </li>

    <li>
      <article>
        <header>
          <a href="/blog/tags/forms.html">
            <h3>forms</h3>
            <p>3 posts.</p>
          </a>
        </header>
      </article>
    </li>

    <li>
      <article>
        <header>
          <a href="/blog/tags/csrf.html">
            <h3>csrf</h3>
            <p>3 posts.</p>
          </a>
        </header>
      </article>
    </li>

    <li>
      <article>
        <header>
          <a href="/blog/tags/enum.html">
            <h3>enum</h3>
            <p>2 posts.</p>
          </a>
        </header>
      </article>
    </li>

    <li>
      <article>
        <header>
          <a href="/blog/tags/decorators.html">
            <h3>decorators</h3>
            <p>2 posts.</p>
          </a>
        </header>
      </article>
    </li>

    <li>
      <article>
        <header>
          <a href="/blog/tags/compression.html">
            <h3>compression</h3>
            <p>1 posts.</p>
          </a>
        </header>
      </article>
    </li>

    <li>
      <article>
        <header>
          <a href="/blog/tags/registration.html">
            <h3>registration</h3>
            <p>1 posts.</p>
          </a>
        </header>
      </article>
    </li>

    <li>
      <article>
        <header>
          <a href="/blog/tags/pony.html">
            <h3>pony</h3>
            <p>1 posts.</p>
          </a>
        </header>
      </article>
    </li>

    <li>
      <article>
        <header>
          <a href="/blog/tags/mvc.html">
            <h3>mvc</h3>
            <p>1 posts.</p>
          </a>
        </header>
      </article>
    </li>

    <li>
      <article>
        <header>
          <a href="/blog/tags/postgres.html">
            <h3>postgres</h3>
            <p>1 posts.</p>
          </a>
        </header>
      </article>
    </li>

  </ul>
</section>


			<!-- Posts List -->
			<!-- <section>
				<ul class="posts">
					<li>
						<article>
							<header>
								<h3><a href="single.html">Congue ullam corper lorem ipsum dolor</a></h3>
								<time class="published" datetime="2015-10-06">October 7, 2015</time>
							</header>
							<a href="single.html" class="image"><img src="images/pic12.jpg" alt="" /></a>
						</article>
					</li>
				</ul>
			</section> -->

			<!-- About -->
			<section class="blurb">
				<h2>About</h2>
				<p>Hi!</p>
				<p>I'm <strong>FunkyBob</strong>, also know as <small>Curtis Maloney</small>.</p>
				<p>Contained herein are some things I thought important enough to write about.</p>
				<!-- <ul class="actions">
					<li><a href="#" class="button">Learn More</a></li>
				</ul> -->
			</section>

			<!-- Footer -->
			<section id="footer">
				<ul class="icons">
					<li><a href="https://twitter.com/BunkyFob" class="fa-twitter"><span class="label">Twitter</span></a></li>
					<!-- <li><a href="#" class="fa-facebook"><span class="label">Facebook</span></a></li>
					<li><a href="#" class="fa-instagram"><span class="label">Instagram</span></a></li>
					<li><a href="#" class="fa-rss"><span class="label">RSS</span></a></li>
					<li><a href="#" class="fa-envelope"><span class="label">Email</span></a></li> -->
				</ul>
				<p class="copyright">&copy; Untitled. Design: <a href="http://html5up.net">HTML5 UP</a>. Images: <a href="http://unsplash.com">Unsplash</a>.</p>
			</section>

		</section>

	</div>

	<!-- Scripts -->
	<script src="/js/jquery.min.js"></script>
	<script src="/js/browser.min.js"></script>
	<script src="/js/breakpoints.min.js"></script>
	<script src="/js/util.js"></script>
	<script src="/js/main.js"></script>

</body>
</html>
